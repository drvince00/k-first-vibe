import { useState } from 'react'

const QUICK_EMOJIS = [
  'ğŸ˜€','ğŸ˜‚','ğŸ¥°','ğŸ˜','ğŸ¤©','ğŸ˜','ğŸ¤”','ğŸ˜­','ğŸ¥º','ğŸ˜¤',
  'ğŸ‘','ğŸ‘','ğŸ”¥','â¤ï¸','ğŸ’œ','ğŸ’¯','ğŸ‰','ğŸ‡°ğŸ‡·','ğŸ±','âœ¨',
]

const EMOJI_CATEGORIES = {
  'Smileys': [
    'ğŸ˜€','ğŸ˜ƒ','ğŸ˜„','ğŸ˜','ğŸ˜†','ğŸ˜…','ğŸ¤£','ğŸ˜‚','ğŸ™‚','ğŸ˜Š',
    'ğŸ˜‡','ğŸ¥°','ğŸ˜','ğŸ¤©','ğŸ˜˜','ğŸ˜—','ğŸ˜š','ğŸ˜‹','ğŸ˜›','ğŸ˜œ',
    'ğŸ¤ª','ğŸ˜','ğŸ¤‘','ğŸ¤—','ğŸ¤­','ğŸ¤«','ğŸ¤”','ğŸ˜','ğŸ˜‘','ğŸ˜¶',
    'ğŸ˜','ğŸ˜’','ğŸ™„','ğŸ˜¬','ğŸ˜®â€ğŸ’¨','ğŸ¤¥','ğŸ˜Œ','ğŸ˜”','ğŸ˜ª','ğŸ¤¤',
    'ğŸ˜´','ğŸ˜·','ğŸ¤’','ğŸ¤•','ğŸ¤¢','ğŸ¤®','ğŸ¥µ','ğŸ¥¶','ğŸ¥´','ğŸ˜µ',
    'ğŸ¤¯','ğŸ¤ ','ğŸ¥³','ğŸ¥¸','ğŸ˜','ğŸ¤“','ğŸ§','ğŸ˜•','ğŸ˜Ÿ','ğŸ™',
    'ğŸ˜®','ğŸ˜¯','ğŸ˜²','ğŸ˜³','ğŸ¥º','ğŸ˜¦','ğŸ˜§','ğŸ˜¨','ğŸ˜°','ğŸ˜¥',
    'ğŸ˜¢','ğŸ˜­','ğŸ˜±','ğŸ˜–','ğŸ˜£','ğŸ˜','ğŸ˜“','ğŸ˜©','ğŸ˜«','ğŸ¥±',
    'ğŸ˜¤','ğŸ˜¡','ğŸ˜ ','ğŸ¤¬','ğŸ‘¿','ğŸ’€','â˜ ï¸','ğŸ’©','ğŸ¤¡','ğŸ‘¹',
  ],
  'Gestures': [
    'ğŸ‘','ğŸ‘','ğŸ‘Š','âœŠ','ğŸ¤›','ğŸ¤œ','ğŸ‘','ğŸ™Œ','ğŸ‘','ğŸ¤²',
    'ğŸ¤','ğŸ™','âœŒï¸','ğŸ¤','ğŸ¤Ÿ','ğŸ¤˜','ğŸ¤™','ğŸ’ª','ğŸ¦¾','ğŸ–•',
    'ğŸ‘‹','ğŸ¤š','ğŸ–ï¸','âœ‹','ğŸ––','ğŸ‘Œ','ğŸ¤Œ','ğŸ¤','ğŸ‘ˆ','ğŸ‘‰',
    'ğŸ‘†','ğŸ‘‡','â˜ï¸','ğŸ«µ','ğŸ«¶','â¤ï¸','ğŸ§¡','ğŸ’›','ğŸ’š','ğŸ’™',
    'ğŸ’œ','ğŸ–¤','ğŸ¤','ğŸ¤','ğŸ’”','â£ï¸','ğŸ’•','ğŸ’','ğŸ’“','ğŸ’—',
    'ğŸ’–','ğŸ’','ğŸ’˜','ğŸ’Ÿ','â™¥ï¸','ğŸ’¯','ğŸ’¢','ğŸ’¥','ğŸ’«','ğŸ’¦',
  ],
  'Food': [
    'ğŸœ','ğŸ','ğŸ²','ğŸ›','ğŸ£','ğŸ±','ğŸ¤','ğŸš','ğŸ™','ğŸ˜',
    'ğŸ¥','ğŸ¥Ÿ','ğŸ¥ ','ğŸ¥¡','ğŸ¢','ğŸ¡','ğŸ§‹','ğŸµ','ğŸ¶','ğŸº',
    'ğŸ»','ğŸ¥‚','ğŸ·','ğŸ¸','ğŸ¹','ğŸ¾','ğŸ¥¢','ğŸ½ï¸','ğŸ”','ğŸŸ',
    'ğŸ•','ğŸŒ®','ğŸŒ¯','ğŸ¥—','ğŸ¥˜','ğŸ«•','ğŸ¥™','ğŸ§†','ğŸŒ­','ğŸ–',
    'ğŸ—','ğŸ¥©','ğŸ¥š','ğŸ§€','ğŸ¥','ğŸ§‡','ğŸ','ğŸ¥','ğŸ¥–','ğŸ¥¨',
    'ğŸ°','ğŸ‚','ğŸ§','ğŸ©','ğŸª','ğŸ«','ğŸ¬','ğŸ­','ğŸ®','ğŸ¯',
  ],
  'Animals': [
    'ğŸ±','ğŸ¶','ğŸ­','ğŸ¹','ğŸ°','ğŸ¦Š','ğŸ»','ğŸ¼','ğŸ¨','ğŸ¯',
    'ğŸ¦','ğŸ®','ğŸ·','ğŸ¸','ğŸµ','ğŸ™ˆ','ğŸ™‰','ğŸ™Š','ğŸ”','ğŸ§',
    'ğŸ¦','ğŸ¤','ğŸ¦†','ğŸ¦…','ğŸ¦‰','ğŸ¦‡','ğŸº','ğŸ—','ğŸ´','ğŸ¦„',
    'ğŸ','ğŸª±','ğŸ›','ğŸ¦‹','ğŸŒ','ğŸ','ğŸœ','ğŸ¾','ğŸ¦','ğŸ',
    'ğŸ¢','ğŸ ','ğŸŸ','ğŸ¡','ğŸ¬','ğŸ³','ğŸ‹','ğŸ¦ˆ','ğŸ™','ğŸ¦‘',
  ],
  'Korea': [
    'ğŸ‡°ğŸ‡·','ğŸ¯','ğŸ­','ğŸ','ğŸ§§','ğŸ','ğŸ','ğŸª­','ğŸ®','ğŸ§¨',
    'ğŸŒ¸','ğŸŒº','ğŸ‹','ğŸ‘','ğŸ','ğŸŒ™','â›©ï¸','ğŸ—¾','ğŸŒ','ğŸ¥‹',
    'ğŸµ','ğŸ¶','ğŸ¤','ğŸ§','ğŸ¸','ğŸ¥','ğŸ¹','ğŸº','ğŸ“º','ğŸ“»',
  ],
  'Objects': [
    'ğŸ“š','ğŸ“–','ğŸ“','âœï¸','ğŸ–Šï¸','ğŸ’¡','ğŸ””','ğŸ”‘','ğŸ’','ğŸ†',
    'ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','ğŸ¯','ğŸ²','ğŸ®','ğŸ³','ğŸ°','ğŸ§©','ğŸ¨',
    'ğŸ–¼ï¸','ğŸ¬','ğŸ“·','ğŸ“±','ğŸ’»','âŒ¨ï¸','ğŸ–¥ï¸','ğŸ“€','ğŸ’¿','ğŸ”®',
    'ğŸ§²','ğŸ”§','ğŸ”¨','âš™ï¸','ğŸ› ï¸','ğŸ“Œ','ğŸ“','âœ‚ï¸','ğŸ“‹','ğŸ“',
    'â­','âœ¨','ğŸ’«','ğŸŒŸ','ğŸ”¥','ğŸ’¥','â„ï¸','ğŸŒˆ','â˜€ï¸','ğŸŒ¤ï¸',
    'â›…','ğŸŒŠ','ğŸ€','ğŸŒ»','ğŸŒ¹','ğŸ’','ğŸ€','ğŸ','ğŸŠ','ğŸ‰',
    'ğŸ‘‘','ğŸ’','ğŸ‘“','ğŸ’','ğŸ‘Ÿ','ğŸ§¢','ğŸ’„','ğŸ’…','ğŸª„','ğŸ«§',
  ],
}

const CATEGORY_ICONS = {
  'Smileys': 'ğŸ˜€',
  'Gestures': 'ğŸ‘',
  'Food': 'ğŸœ',
  'Animals': 'ğŸ±',
  'Korea': 'ğŸ‡°ğŸ‡·',
  'Objects': 'â­',
}

const CATEGORY_LABELS_KO = {
  'Smileys': 'í‘œì •',
  'Gestures': 'ì œìŠ¤ì²˜',
  'Food': 'ìŒì‹',
  'Animals': 'ë™ë¬¼',
  'Korea': 'í•œêµ­',
  'Objects': 'ì‚¬ë¬¼',
}

export default function EmojiPicker({ onSelect, lang, compact = false }) {
  const [expanded, setExpanded] = useState(false)
  const [activeCategory, setActiveCategory] = useState('Smileys')

  const categories = Object.keys(EMOJI_CATEGORIES)

  return (
    <div className={`emoji-picker-wrapper ${compact ? 'emoji-compact' : ''}`}>
      {/* Quick emoji row + expand button */}
      <div className="emoji-quick-row">
        {QUICK_EMOJIS.map((em) => (
          <button
            key={em}
            type="button"
            className="emoji-btn"
            onClick={() => onSelect(em)}
          >
            {em}
          </button>
        ))}
        <button
          type="button"
          className={`emoji-expand-btn ${expanded ? 'active' : ''}`}
          onClick={() => setExpanded((v) => !v)}
          title={lang === 'ko' ? 'ë” ë§ì€ ì´ëª¨ì§€' : 'More emojis'}
        >
          {expanded ? 'âœ•' : '+'}
        </button>
      </div>

      {/* Expanded panel with categories */}
      {expanded && (
        <div className="emoji-expanded-panel">
          <div className="emoji-category-tabs">
            {categories.map((cat) => (
              <button
                key={cat}
                type="button"
                className={`emoji-category-tab ${activeCategory === cat ? 'active' : ''}`}
                onClick={() => setActiveCategory(cat)}
                title={lang === 'ko' ? CATEGORY_LABELS_KO[cat] : cat}
              >
                {CATEGORY_ICONS[cat]}
              </button>
            ))}
          </div>
          <div className="emoji-category-label">
            {lang === 'ko' ? CATEGORY_LABELS_KO[activeCategory] : activeCategory}
          </div>
          <div className="emoji-grid">
            {EMOJI_CATEGORIES[activeCategory].map((em) => (
              <button
                key={em}
                type="button"
                className="emoji-btn"
                onClick={() => onSelect(em)}
              >
                {em}
              </button>
            ))}
          </div>
        </div>
      )}
    </div>
  )
}
